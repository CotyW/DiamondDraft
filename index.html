<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiamondDraft - Baseball Stats Calculator</title>
    <link rel="stylesheet" href="/DiamondDraft/static/styles.css">
    <meta name="description" content="Calculate and compare baseball player values for fantasy drafts based on customizable scoring metrics">
</head>
<body>
    <div class="container">
        <h1>DiamondDraft</h1>
        <p class="tagline">Baseball Player Value Calculator</p>
        
        <div class="controls">
            <div class="scoring-section">
                <h2>Scoring Weights</h2>
                <div class="weight-inputs">
                    <div class="weight-column">
                        <h3>Batting</h3>
                        <div class="input-group">
                            <label for="avg">AVG:</label>
                            <input type="number" id="avg" value="300" step="1">
                        </div>
                        <div class="input-group">
                            <label for="runs">Runs:</label>
                            <input type="number" id="runs" value="5" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="rbi">RBI:</label>
                            <input type="number" id="rbi" value="5" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="steals">Steals:</label>
                            <input type="number" id="steals" value="8" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="hr">HRs:</label>
                            <input type="number" id="hr" value="10" step="0.1">
                        </div>
                    </div>
                    <div class="weight-column">
                        <h3>Pitching</h3>
                        <div class="input-group">
                            <label for="wins">Wins:</label>
                            <input type="number" id="wins" value="7" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="era">ERA:</label>
                            <input type="number" id="era" value="15" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="strikeouts">K's:</label>
                            <input type="number" id="strikeouts" value="2" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="walks">BB's:</label>
                            <input type="number" id="walks" value="5" step="0.1">
                        </div>
                        <div class="input-group">
                            <label for="saves">Saves:</label>
                            <input type="number" id="saves" value="8" step="0.1">
                        </div>
                    </div>
                </div>
                <button id="calculate-btn">Calculate Player Values</button>
            </div>
            
            <div class="options-row">
                <div class="year-toggle">
                    <label>Stats Year:</label>
                    <div class="toggle-buttons">
                        <button class="year-btn active" data-year="2024">2024 Actual</button>
                        <button class="year-btn" data-year="2025_projected">2025 Projected</button>
                        <button class="year-btn" data-year="2025_actual">2025 Actual</button>
                    </div>
                </div>
                
                <div class="filter-section">
                    <label for="position-filter">Filter by Position:</label>
                    <select id="position-filter">
                        <option value="all">All Players</option>
                        <option value="batter">Batters Only</option>
                        <option value="pitcher">Pitchers Only</option>
                    </select>
                </div>
                
                <div class="search-section">
                    <label for="player-search">Search:</label>
                    <input type="text" id="player-search" placeholder="Player name...">
                </div>
            </div>
        </div>
        
        <div class="results-section">
            <h2>Player Rankings</h2>
            <div class="table-container">
                <table id="players-table">
                   <!-- Replace the existing table header in index.html with this one -->
<table id="players-table">
    <thead>
        <tr>
            <th data-sort="name">Player Name</th>
            <th data-sort="team">Team</th>
            <th data-sort="position">Position</th>
            <th class="batting-stat" data-sort="avg">AVG</th>
            <th class="batting-stat" data-sort="runs">Runs</th>
            <th class="batting-stat" data-sort="rbi">RBI</th>
            <th class="batting-stat" data-sort="steals">Steals</th>
            <th class="batting-stat" data-sort="hr">HRs</th>
            <th class="pitching-stat" data-sort="wins">Wins</th>
            <th class="pitching-stat" data-sort="era">ERA</th>
            <th class="pitching-stat" data-sort="strikeouts">K's</th>
            <th class="pitching-stat" data-sort="walks">BB's</th>
            <th class="pitching-stat" data-sort="saves">Saves</th>
            <th data-sort="points" class="points-column">Points</th>
        </tr>
    </thead>
    <tbody id="players-body">
        <!-- Player data will be populated here -->
    </tbody>
</table>
            </div>
        </div>
        
        <div class="data-info">
            <div id="data-timestamp">Last updated: Loading...</div>
        </div>
        
        <div class="footer">
            <p>DiamondDraft - Fantasy Baseball Value Calculator</p>
            <p><small>Data sourced from MLB Stats API. Updated daily.</small></p>
        </div>
    </div>
    <footer>
        <p>For inquiries, please reach out to the developer at <a href="mailto:coty1283@gmail.com">coty1283@gmail.com</a></p>
        <p>To support the creator, click the cup and "Buy me a coffee".</p>
    </footer>
    <!-- Buy Me a Coffee Widget -->
  <script 
  data-name="BMC-Widget"
  data-cfasync="false"
  src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
  data-id="coty"
  data-description="Support me on Buy me a coffee!"
  data-message="Thanks for visiting DiamondDraft! I am new to development, so updates will come slow, but I WILL be actively updating this page with more features. If you'd like to support this page, feel free to buy me a beer!"
  data-color="#5F7FFF"
  data-position="Right"
  data-x_margin="18"
  data-y_margin="18">
    </script>
    <script src="/DiamondDraft/static/main.js"></script>

    // Add this script to your HTML file temporarily to help debug issues
// Place it right before the closing body tag

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Create a debug panel
    const debugPanel = document.createElement('div');
    debugPanel.style.position = 'fixed';
    debugPanel.style.bottom = '10px';
    debugPanel.style.right = '10px';
    debugPanel.style.backgroundColor = '#f8f9fa';
    debugPanel.style.border = '1px solid #ddd';
    debugPanel.style.padding = '10px';
    debugPanel.style.borderRadius = '5px';
    debugPanel.style.zIndex = '9999';
    debugPanel.style.maxHeight = '300px';
    debugPanel.style.overflowY = 'auto';
    debugPanel.style.width = '300px';
    debugPanel.style.fontSize = '12px';
    debugPanel.style.fontFamily = 'monospace';
    
    const heading = document.createElement('h3');
    heading.textContent = 'Sorting Debug Panel';
    heading.style.margin = '0 0 10px 0';
    heading.style.fontSize = '14px';
    debugPanel.appendChild(heading);
    
    const toggleBtn = document.createElement('button');
    toggleBtn.textContent = 'Hide Panel';
    toggleBtn.style.fontSize = '10px';
    toggleBtn.style.padding = '2px 5px';
    toggleBtn.style.marginBottom = '5px';
    toggleBtn.onclick = function() {
        const content = document.getElementById('debug-content');
        if (content.style.display === 'none') {
            content.style.display = 'block';
            this.textContent = 'Hide Panel';
        } else {
            content.style.display = 'none';
            this.textContent = 'Show Panel';
        }
    };
    debugPanel.appendChild(toggleBtn);
    
    const content = document.createElement('div');
    content.id = 'debug-content';
    debugPanel.appendChild(content);
    
    const clearBtn = document.createElement('button');
    clearBtn.textContent = 'Clear Log';
    clearBtn.style.fontSize = '10px';
    clearBtn.style.padding = '2px 5px';
    clearBtn.style.marginRight = '5px';
    clearBtn.onclick = function() {
        content.innerHTML = '';
    };
    debugPanel.appendChild(clearBtn);
    
    const logSorting = document.createElement('button');
    logSorting.textContent = 'Test Sorting';
    logSorting.style.fontSize = '10px';
    logSorting.style.padding = '2px 5px';
    logSorting.onclick = function() {
        // Log sorting headers info
        const headers = document.querySelectorAll('th[data-sort]');
        log(`Found ${headers.length} sortable headers:`);
        headers.forEach(header => {
            log(`- ${header.textContent} (data-sort="${header.dataset.sort}")`);
            testSortClick(header);
        });
    };
    debugPanel.appendChild(logSorting);
    
    document.body.appendChild(debugPanel);
    
    // Original console.log
    const originalLog = console.log;
    
    // Override console.log
    console.log = function() {
        // Call original console.log
        originalLog.apply(console, arguments);
        
        // Add to debug panel
        const args = Array.from(arguments);
        log(args.join(' '));
    };
    
    // Helper functions
    function log(message) {
        const logItem = document.createElement('div');
        logItem.textContent = message;
        logItem.style.borderBottom = '1px solid #eee';
        logItem.style.paddingBottom = '3px';
        logItem.style.marginBottom = '3px';
        content.appendChild(logItem);
        
        // Auto-scroll to bottom
        content.scrollTop = content.scrollHeight;
    }
    
    function testSortClick(header) {
        const headerText = header.textContent;
        log(`Testing click on ${headerText}...`);
        
        // Create a simulated click event
        const clickEvent = new MouseEvent('click', {
            bubbles: true,
            cancelable: true,
            view: window
        });
        
        // Dispatch it on the header
        setTimeout(() => {
            header.dispatchEvent(clickEvent);
            log(`Click dispatched on ${headerText}`);
            
            // Check if the class was added
            setTimeout(() => {
                if (header.classList.contains('sort-asc') || header.classList.contains('sort-desc')) {
                    log(`✓ Sort indicator added to ${headerText}`);
                } else {
                    log(`✗ No sort indicator on ${headerText}`);
                }
            }, 100);
        }, 500);
    }
    
    // Log initial state
    log('Debug panel initialized');
    log(`Current time: ${new Date().toLocaleTimeString()}`);
    
    // Log if we're in a weird state
    setTimeout(() => {
        // Check if any headers have both sort-asc and sort-desc
        const badHeaders = document.querySelectorAll('th.sort-asc.sort-desc');
        if (badHeaders.length > 0) {
            log('ERROR: Headers have both sort-asc and sort-desc classes:');
            badHeaders.forEach(header => {
                log(`- ${header.textContent}`);
            });
        }
        
        // Check if multiple headers have sort indicators
        const ascHeaders = document.querySelectorAll('th.sort-asc');
        const descHeaders = document.querySelectorAll('th.sort-desc');
        if (ascHeaders.length + descHeaders.length > 1) {
            log('ERROR: Multiple headers have sort indicators:');
            ascHeaders.forEach(header => {
                log(`- ${header.textContent} (asc)`);
            });
            descHeaders.forEach(header => {
                log(`- ${header.textContent} (desc)`);
            });
        }
    }, 1000);
});
</script>
</body>
</html>